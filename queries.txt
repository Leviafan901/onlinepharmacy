//привязка заказа к деталях о заказе
SELECT pharmacy.`order`.id, prescription_id, date, status, count
FROM pharmacy.`order`
LEFT JOIN order_medicine
ON order_medicine.order_id = pharmacy.`order`.id
ORDER BY date;

//сумма заказа
SELECT order_medicine.order_id, medicine.name,
		SUM(order_medicine.count * medicine.price) AS total_amount
		FROM order_medicine
		JOIN medicine ON medicine.id = order_medicine.medicine_id
		GROUP BY order_medicine.order_id;
//done		
SELECT order_id, name, total_amount, prescription_id, date, status, count FROM
(SELECT om.order_id, m.name,
		SUM(om.count * m.price) AS total_amount
		FROM order_medicine om
		JOIN medicine m ON om.medicine_id = m.id
		GROUP BY om.order_id) AS orders_count
INNER JOIN
(SELECT o.id, prescription_id, date, status, count
FROM pharmacy.`order` o
LEFT JOIN order_medicine m_o
ON m_o.order_id = o.id
WHERE o.user_id = 2
GROUP BY o.id) AS orders_info
ON orders_count.order_id = orders_info.id
ORDER BY date;